<!DOCTYPE html>
<html>
<head>
  <title>Sleep Cycle Calculator</title>
  <style>
    body {
      background:#0f172a;
      color:white;
      font-family:Arial;
      text-align:center;
      padding-top:50px;
    }
    .box {
      background:#111827;
      padding:20px;
      border-radius:12px;
      display:inline-block;
    }
    input,button {
      padding:10px;
      font-size:16px;
      margin:5px;
    }
  </style>
</head>
<body>

<div class="box">
  <h1>Sleep Cycle Calculator</h1>
  <p>Current time: <span id="now"></span></p>

  <label>Wake-up time:</label>
  <input type="time" id="wake">
  <button onclick="calc()">Calculate</button>

  <p id="out"></p>
</div>

<script>
function update(){
  let n=new Date();
  document.getElementById("now").innerText=n.toLocaleTimeString();
}
setInterval(update,1000);
update();

function calc() {
  let now = new Date();
  let t = document.getElementById("wake").value;
  if (!t) { alert("Pick a wake time!"); return; }

  let [h, m] = t.split(":");
  let wake = new Date();
  wake.setHours(h, m, 0, 0);

  // If wake time already passed today, assume tomorrow
  if (wake < now) wake.setDate(wake.getDate() + 1);

  // Time difference in minutes
  let mins = (wake - now) / 60000;

  // Number of 90-min cycles BEFORE wake time
  let cycles = Math.floor(mins / 90);

  // Go BACK from wake time
  let best = new Date(wake.getTime() - cycles * 90 * 60000);

  let sleepHours = (cycles * 1.5).toFixed(2);

  document.getElementById("out").innerHTML =
    "Total sleep: " + sleepHours + " hours<br>" +
    "Cycles: " + cycles + "<br>" +
    "Go to bed at: " + best.toLocaleTimeString();
}
</script>

</body>
</html>
